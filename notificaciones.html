<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notificaciones - FutPro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background: #181818; color: #FFD700; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        h1 { color: #FFD700; text-align: center; margin-bottom: 30px; }
        .notificacion { background: #232323; border: 2px solid #FFD700; border-radius: 12px; padding: 15px; margin-bottom: 15px; position: relative; }
        .notificacion.no-leida { border-left: 5px solid #ff4444; }
        .notificacion-header { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
        .notificacion-avatar { width: 40px; height: 40px; border-radius: 50%; background: #FFD700; display: flex; align-items: center; justify-content: center; color: #181818; font-weight: bold; }
        .notificacion-tipo { font-size: 12px; background: #FFD700; color: #181818; padding: 4px 8px; border-radius: 20px; font-weight: bold; }
        .notificacion-tiempo { font-size: 12px; color: #ccc; margin-left: auto; }
        .notificacion-mensaje { margin: 8px 0; }
        .notificacion-acciones { margin-top: 10px; display: flex; gap: 10px; }
        .btn { background: #FFD700; color: #181818; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px; }
        .btn:hover { background: #FFA500; }
        .filtros { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .filtro { background: #333; color: #FFD700; border: 1px solid #FFD700; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 14px; }
        .filtro.activo { background: #FFD700; color: #181818; }
        .vacio { text-align: center; color: #ccc; margin-top: 50px; }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-bell"></i> Notificaciones</h1>
        
        <div class="filtros">
            <div class="filtro activo" onclick="filtrarNotificaciones('todas')">Todas</div>
            <div class="filtro" onclick="filtrarNotificaciones('like')">‚öΩ Likes</div>
            <div class="filtro" onclick="filtrarNotificaciones('comentario')">üí¨ Comentarios</div>
            <div class="filtro" onclick="filtrarNotificaciones('mensaje')">üì© Mensajes</div>
            <div class="filtro" onclick="filtrarNotificaciones('torneo')">üèÜ Torneos</div>
            <div class="filtro" onclick="filtrarNotificaciones('equipo')">üë• Equipos</div>
        </div>
        
        <div id="notificaciones-container">
            <!-- Las notificaciones se cargar√°n aqu√≠ -->
        </div>
        
        <div id="no-notificaciones" class="vacio" style="display: none;">
            <i class="fas fa-bell-slash" style="font-size: 48px; margin-bottom: 20px; display: block;"></i>
            No tienes notificaciones
        </div>
    </div>

    <script>
        let filtroActual = 'todas';
        let todasLasNotificaciones = [];

        function cargarNotificaciones() {
            // Generar notificaciones de demostraci√≥n
            todasLasNotificaciones = [
                {
                    id: 'demo_1',
                    tipo: 'like_historia',
                    mensaje: 'Real Madrid le dio ‚öΩ like a tu historia',
                    timestamp: new Date(Date.now() - 300000).toISOString(), // 5 min ago
                    leida: false,
                    fromUser: 'Real Madrid'
                },
                {
                    id: 'demo_2',
                    tipo: 'comentario_historia',
                    mensaje: 'FC Barcelona coment√≥ tu historia: "¬°Excelente jugada!"',
                    timestamp: new Date(Date.now() - 900000).toISOString(), // 15 min ago
                    leida: false,
                    fromUser: 'FC Barcelona'
                },
                {
                    id: 'demo_3',
                    tipo: 'like_post',
                    mensaje: 'Liverpool FC le dio ‚öΩ like a tu publicaci√≥n',
                    timestamp: new Date(Date.now() - 1800000).toISOString(), // 30 min ago
                    leida: true,
                    fromUser: 'Liverpool FC'
                }
            ];

            // Cargar notificaciones reales del localStorage si existen
            const userId = JSON.parse(localStorage.getItem('futpro_user') || '{}').id;
            if (userId) {
                const notifReales = JSON.parse(localStorage.getItem(`futpro_notificaciones_${userId}`) || '[]');
                todasLasNotificaciones = [...notifReales, ...todasLasNotificaciones];
            }

            // Tambi√©n cargar de las categor√≠as de auto-guardado
            const likesRecibidos = JSON.parse(localStorage.getItem('futpro_likes_recibidos') || '[]');
            const comentariosRecibidos = JSON.parse(localStorage.getItem('futpro_comentarios_recibidos') || '[]');

            likesRecibidos.forEach(like => {
                todasLasNotificaciones.push({
                    id: 'like_' + like.id,
                    tipo: 'like',
                    mensaje: `${like.fromUser || 'Alguien'} le dio ‚öΩ like a tu ${like.tipoContenido || 'contenido'}`,
                    timestamp: like.timestamp,
                    leida: false,
                    fromUser: like.fromUser
                });
            });

            comentariosRecibidos.forEach(comentario => {
                todasLasNotificaciones.push({
                    id: 'comentario_' + comentario.id,
                    tipo: 'comentario',
                    mensaje: `${comentario.fromUser || 'Alguien'} coment√≥: "${comentario.comentario?.substring(0, 50) || 'Comentario'}..."`,
                    timestamp: comentario.timestamp,
                    leida: false,
                    fromUser: comentario.fromUser
                });
            });

            // Ordenar por fecha (m√°s recientes primero)
            todasLasNotificaciones.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            mostrarNotificaciones();
        }

        function mostrarNotificaciones() {
            const container = document.getElementById('notificaciones-container');
            const noNotificaciones = document.getElementById('no-notificaciones');
            
            // Filtrar notificaciones
            let notificacionesFiltradas = todasLasNotificaciones;
            if (filtroActual !== 'todas') {
                notificacionesFiltradas = todasLasNotificaciones.filter(n => 
                    n.tipo && n.tipo.includes(filtroActual)
                );
            }
            
            if (notificacionesFiltradas.length === 0) {
                container.innerHTML = '';
                noNotificaciones.style.display = 'block';
                return;
            }
            
            noNotificaciones.style.display = 'none';
            container.innerHTML = notificacionesFiltradas.map(notif => `
                <div class="notificacion ${!notif.leida ? 'no-leida' : ''}" data-id="${notif.id}">
                    <div class="notificacion-header">
                        <div class="notificacion-avatar">
                            ${getIconoTipo(notif.tipo)}
                        </div>
                        <div class="notificacion-tipo">${formatearTipo(notif.tipo)}</div>
                        <div class="notificacion-tiempo">${formatearTiempo(notif.timestamp)}</div>
                    </div>
                    <div class="notificacion-mensaje">${notif.mensaje}</div>
                    ${!notif.leida ? `
                        <div class="notificacion-acciones">
                            <button class="btn" onclick="marcarLeida('${notif.id}')">Marcar como le√≠da</button>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function getIconoTipo(tipo) {
            const iconos = {
                'like': '‚öΩ',
                'like_historia': '‚öΩ',
                'like_post': '‚öΩ',
                'comentario': 'üí¨',
                'comentario_historia': 'üí¨',
                'mensaje': 'üì©',
                'torneo': 'üèÜ',
                'equipo': 'üë•',
                'partido': '‚öΩ',
                'default': 'üîî'
            };
            return iconos[tipo] || iconos.default;
        }

        function formatearTipo(tipo) {
            const tipos = {
                'like': 'Like',
                'like_historia': 'Like Historia',
                'like_post': 'Like Post',
                'comentario': 'Comentario',
                'comentario_historia': 'Comentario Historia',
                'mensaje': 'Mensaje',
                'torneo': 'Torneo',
                'equipo': 'Equipo',
                'partido': 'Partido'
            };
            return tipos[tipo] || 'Notificaci√≥n';
        }

        function formatearTiempo(timestamp) {
            if (!timestamp) return 'Hace un momento';
            
            const ahora = new Date();
            const fecha = new Date(timestamp);
            const diffMs = ahora - fecha;
            const diffMins = Math.floor(diffMs / 60000);
            
            if (diffMins < 1) return 'Ahora';
            if (diffMins < 60) return `Hace ${diffMins}m`;
            
            const diffHours = Math.floor(diffMins / 60);
            if (diffHours < 24) return `Hace ${diffHours}h`;
            
            const diffDays = Math.floor(diffHours / 24);
            return `Hace ${diffDays}d`;
        }

        function filtrarNotificaciones(tipo) {
            filtroActual = tipo;
            
            // Actualizar filtros visuales
            document.querySelectorAll('.filtro').forEach(f => f.classList.remove('activo'));
            event.target.classList.add('activo');
            
            mostrarNotificaciones();
        }

        function marcarLeida(notifId) {
            const notif = todasLasNotificaciones.find(n => n.id === notifId);
            if (notif) {
                notif.leida = true;
                mostrarNotificaciones();
            }
        }

        // Cargar notificaciones al inicio
        document.addEventListener('DOMContentLoaded', cargarNotificaciones);
    </script>
</body>
</html>
        .btn:hover { background: #FFA500; }
        .filtros { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .filtro { background: #333; color: #FFD700; border: 1px solid #FFD700; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 14px; }
        .filtro.activo { background: #FFD700; color: #181818; }
        .vacio { text-align: center; color: #ccc; margin-top: 50px; }
    </style>
</head>
<body>
	<div class="container">
		<h1 style="color:#FFD700">Notificaciones</h1>
		<div style="margin-bottom:12px;">
			<button onclick="agregarNotificacion()" style="background:#FFD700;color:#181818;padding:8px 12px;border:none;border-radius:6px;cursor:pointer;margin-right:8px;">‚ûï Nueva notificaci√≥n</button>
			<button onclick="limpiarNotificaciones()" style="background:#c00;color:#fff;padding:8px 12px;border:none;border-radius:6px;cursor:pointer;">üóëÔ∏è Limpiar todas</button>
		</div>
		<div id="list"></div>
		<br>
		<a href="./homepage-instagram.html" style="display:inline-block;padding:8px 12px;background:#FFD700;color:#181818;border-radius:8px;text-decoration:none;font-weight:bold">‚Üê Volver</a>
	</div>
	<script>
		function getNotificaciones() {
			return JSON.parse(localStorage.getItem('futpro_notificaciones') || '[]');
		}
		
		function saveNotificaciones(arr) {
			localStorage.setItem('futpro_notificaciones', JSON.stringify(arr));
		}
		
		function renderNotificaciones() {
			const list = document.getElementById('list');
			const notifs = getNotificaciones();
			list.innerHTML = '';
			
			if (notifs.length === 0) {
				list.innerHTML = '<div class="item">üì≠ No tienes notificaciones.</div>';
				return;
			}
			
			notifs.forEach((notif, idx) => {
				const div = document.createElement('div');
				div.className = 'item';
				div.style.opacity = notif.leida ? '0.6' : '1';
				div.innerHTML = `
					${notif.icono} ${notif.mensaje} 
					<small style="color:#aaa;">(${notif.fecha})</small>
					<button onclick="marcarLeido(${idx})" ${notif.leida ? 'disabled' : ''}>${notif.leida ? 'Le√≠do' : 'Marcar le√≠do'}</button>
					<button onclick="eliminarNotificacion(${idx})" style="background:#c00;color:#fff;border:none;padding:2px 6px;border-radius:4px;cursor:pointer;margin-left:8px;">‚úï</button>
				`;
				list.appendChild(div);
			});
		}
		
		function marcarLeido(idx) {
			const notifs = getNotificaciones();
			notifs[idx].leida = true;
			saveNotificaciones(notifs);
			renderNotificaciones();
		}
		
		function eliminarNotificacion(idx) {
			const notifs = getNotificaciones();
			notifs.splice(idx, 1);
			saveNotificaciones(notifs);
			renderNotificaciones();
		}
		
		function agregarNotificacion() {
			const mensajes = [
				'üîî Nueva invitaci√≥n a torneo',
				'üèÜ Tu equipo gan√≥ un partido',
				'‚öΩ Nuevo amistoso programado',
				'üë• Nuevo jugador se uni√≥ a tu equipo',
				'üìä Estad√≠sticas actualizadas',
				'üéØ Has alcanzado un nuevo logro'
			];
			const notifs = getNotificaciones();
			const mensaje = mensajes[Math.floor(Math.random() * mensajes.length)];
			notifs.unshift({
				icono: mensaje.split(' ')[0],
				mensaje: mensaje.substring(2),
				fecha: new Date().toLocaleString(),
				leida: false
			});
			saveNotificaciones(notifs);
			renderNotificaciones();
		}
		
		function limpiarNotificaciones() {
			if (confirm('¬øEliminar todas las notificaciones?')) {
				localStorage.removeItem('futpro_notificaciones');
				renderNotificaciones();
			}
		}
		
		// Inicializar con datos de ejemplo si no hay notificaciones
		if (getNotificaciones().length === 0) {
			const ejemplos = [
				{ icono: 'üîî', mensaje: 'Tienes 1 invitaci√≥n a torneo', fecha: new Date().toLocaleString(), leida: false },
				{ icono: 'üèÜ', mensaje: 'Tu equipo gan√≥ un partido amistoso', fecha: new Date().toLocaleString(), leida: false }
			];
			saveNotificaciones(ejemplos);
		}
		
		renderNotificaciones();
	</script>
</body>
</html>