<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>FutPro - Chat</title>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
	<style>body{font-family:Segoe UI, Tahoma, Verdana;background:#0f0f0f;color:#fff;padding:20px}.container{max-width:700px;margin:0 auto}.chat-box{background:#181818;padding:12px;border-radius:8px;height:300px;overflow:auto}.composer{display:flex;gap:8px;margin-top:8px}.composer input{flex:1;padding:8px;border-radius:6px;border:none}.composer button{padding:8px 10px;border-radius:6px;border:none;background:#FFD700;color:#181818;font-weight:bold;cursor:pointer}</style>
</head>
<body>
	<div class="container">
		<h1 style="color:#FFD700">Chat</h1>
		<div style="margin-bottom:8px;">
			<button onclick="cambiarSala('general')" id="btn-general" style="background:#FFD700;color:#181818;padding:6px 10px;border:none;border-radius:4px;cursor:pointer;margin-right:6px;">General</button>
			<button onclick="cambiarSala('equipos')" id="btn-equipos" style="background:#333;color:#fff;padding:6px 10px;border:none;border-radius:4px;cursor:pointer;margin-right:6px;">Equipos</button>
			<button onclick="cambiarSala('torneos')" id="btn-torneos" style="background:#333;color:#fff;padding:6px 10px;border:none;border-radius:4px;cursor:pointer;">Torneos</button>
			<button onclick="limpiarChat()" style="background:#c00;color:#fff;padding:6px 10px;border:none;border-radius:4px;cursor:pointer;float:right;">üóëÔ∏è Limpiar</button>
		</div>
		<div class="chat-box" id="chatBox"></div>
		<div class="composer">
			<input id="msg" placeholder="Escribe tu mensaje..." onkeypress="if(event.key==='Enter') sendMsg()">
			<button onclick="sendMsg()">Enviar</button>
		</div>
		<br>
		<a href="./homepage-instagram.html" style="display:inline-block;padding:8px 12px;background:#FFD700;color:#181818;border-radius:8px;text-decoration:none;font-weight:bold">‚Üê Volver</a>
	</div>
	<script>
		let salaActual = 'general';
		
		function getChat(sala) {
			return JSON.parse(localStorage.getItem(`futpro_chat_${sala}`) || '[]');
		}
		
		function saveChat(sala, mensajes) {
			localStorage.setItem(`futpro_chat_${sala}`, JSON.stringify(mensajes));
		}
		
		function renderChat() {
			const box = document.getElementById('chatBox');
			const mensajes = getChat(salaActual);
			box.innerHTML = '';
			
			if (mensajes.length === 0) {
				box.innerHTML = `<div style="color:#666;text-align:center;padding:20px;">üí¨ Sala de chat: ${salaActual}</div>`;
			} else {
				mensajes.forEach(msg => {
					const div = document.createElement('div');
					div.style.marginBottom = '8px';
					div.innerHTML = `<b style="color:#FFD700;">${msg.usuario}:</b> ${msg.texto} <small style="color:#aaa;">${msg.hora}</small>`;
					box.appendChild(div);
				});
			}
			box.scrollTop = box.scrollHeight;
		}
		
		function sendMsg() {
			const input = document.getElementById('msg');
			if (!input.value.trim()) return;
			
			const mensajes = getChat(salaActual);
			const usuario = localStorage.getItem('futpro_usuario_nombre') || 'An√≥nimo';
			
			mensajes.push({
				usuario: usuario,
				texto: input.value.trim(),
				hora: new Date().toLocaleTimeString()
			});
			
			saveChat(salaActual, mensajes);
			input.value = '';
			renderChat();
		}
		
		function cambiarSala(sala) {
			salaActual = sala;
			
			// Actualizar botones
			document.querySelectorAll('button[id^="btn-"]').forEach(btn => {
				btn.style.background = '#333';
				btn.style.color = '#fff';
			});
			document.getElementById(`btn-${sala}`).style.background = '#FFD700';
			document.getElementById(`btn-${sala}`).style.color = '#181818';
			
			renderChat();
		}
		
		function limpiarChat() {
			if (confirm(`¬øLimpiar todos los mensajes de la sala ${salaActual}?`)) {
				localStorage.removeItem(`futpro_chat_${salaActual}`);
				renderChat();
			}
		}
		
		// Inicializar con mensajes de ejemplo
		if (getChat('general').length === 0) {
			const ejemplos = [
				{ usuario: 'Sistema', texto: 'Bienvenido al chat de FutPro', hora: new Date().toLocaleTimeString() }
			];
			saveChat('general', ejemplos);
		}
		
		renderChat();
	</script>
</body>
</html>