<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FutPro - Videos</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    body{font-family:Segoe UI, Tahoma, Verdana; background:#0f0f0f;color:#fff;padding:20px}
    .container{max-width:900px;margin:0 auto}
    .tabs{display:flex;gap:8px;margin-bottom:20px;border-bottom:1px solid #333}
    .tab{padding:12px 16px;border:none;background:none;color:#666;cursor:pointer;border-bottom:2px solid transparent}
    .tab.active{color:#FFD700;border-bottom-color:#FFD700}
    .video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}
    .video-card{background:#181818;border-radius:12px;overflow:hidden;border:1px solid #333}
    .video-thumbnail{width:100%;height:180px;background:#333;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer}
    .play-btn{font-size:48px;color:#FFD700;opacity:0.8}
    .video-info{padding:12px}
    .video-title{color:#FFD700;margin-bottom:8px;font-weight:bold}
    .video-meta{color:#aaa;font-size:12px;margin-bottom:8px}
    .video-actions{display:flex;gap:8px;margin-top:8px}
    .btn{padding:6px 10px;border:none;border-radius:4px;cursor:pointer;font-size:12px}
    .btn-primary{background:#FFD700;color:#181818}
    .btn-secondary{background:#333;color:#fff}
    .live-indicator{position:absolute;top:8px;left:8px;background:#c00;color:#fff;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:bold}
  </style>
</head>
<body>
  <div class="container">
    <h1 style="color:#FFD700">üì∫ Videos y Transmisiones</h1>
    
    <div class="tabs">
      <button class="tab active" onclick="cambiarTab('destacados')" id="tab-destacados">üåü Destacados</button>
      <button class="tab" onclick="cambiarTab('envivo')" id="tab-envivo">üî¥ En Vivo</button>
      <button class="tab" onclick="cambiarTab('partidos')" id="tab-partidos">‚öΩ Partidos</button>
      <button class="tab" onclick="cambiarTab('entrenamientos')" id="tab-entrenamientos">üí™ Entrenamientos</button>
      <button class="tab" onclick="cambiarTab('misvideos')" id="tab-misvideos">üë§ Mis Videos</button>
    </div>
    
    <div style="margin-bottom:16px;">
      <button onclick="subirVideo()" class="btn btn-primary">‚ûï Subir Video</button>
      <button onclick="crearTransmision()" class="btn btn-secondary">üì° Transmitir en Vivo</button>
    </div>
    
    <div class="video-grid" id="videoGrid"></div>
    
    <!-- Modal reproductor -->
    <div id="modalReproductor" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.9);z-index:1000;">
      <div style="position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;">
        <button onclick="cerrarReproductor()" style="position:absolute;top:20px;right:30px;background:none;border:none;color:#fff;font-size:36px;cursor:pointer;">√ó</button>
        <div style="background:#181818;padding:20px;border-radius:12px;max-width:800px;width:90%;">
          <div id="reproductorContent"></div>
        </div>
      </div>
    </div>
    
    <br>
    <a href="./homepage-instagram.html" class="btn btn-primary">‚Üê Volver</a>
  </div>

  <script>
    let tabActual = 'destacados';
    
    function getVideos() {
      return JSON.parse(localStorage.getItem('futpro_videos') || '[]');
    }
    
    function saveVideos(videos) {
      localStorage.setItem('futpro_videos', JSON.stringify(videos));
    }
    
    function getFavoritos() {
      return JSON.parse(localStorage.getItem('futpro_videos_favoritos') || '[]');
    }
    
    function saveFavoritos(favoritos) {
      localStorage.setItem('futpro_videos_favoritos', JSON.stringify(favoritos));
    }
    
    function renderVideos() {
      const grid = document.getElementById('videoGrid');
      let videos = getVideos();
      
      // Filtrar por tab
      videos = videos.filter(v => {
        switch(tabActual) {
          case 'destacados': return v.destacado;
          case 'envivo': return v.envivo;
          case 'partidos': return v.categoria === 'partido';
          case 'entrenamientos': return v.categoria === 'entrenamiento';
          case 'misvideos': return v.esPropio;
          default: return true;
        }
      });
      
      grid.innerHTML = '';
      
      if (videos.length === 0) {
        grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#666;">No hay videos en esta secci√≥n</div>`;
        return;
      }
      
      const favoritos = getFavoritos();
      
      videos.forEach(video => {
        const esFavorito = favoritos.includes(video.id);
        const iconoFav = esFavorito ? '‚ù§Ô∏è' : 'ü§ç';
        
        const card = document.createElement('div');
        card.className = 'video-card';
        card.innerHTML = `
          <div class="video-thumbnail" onclick="reproducirVideo('${video.id}')">
            ${video.envivo ? '<div class="live-indicator">üî¥ EN VIVO</div>' : ''}
            <div class="play-btn">‚ñ∂Ô∏è</div>
          </div>
          <div class="video-info">
            <div class="video-title">${video.titulo}</div>
            <div class="video-meta">üëÅÔ∏è ${video.visualizaciones} ‚Ä¢ üëç ${video.likes} ‚Ä¢ ${video.fecha}</div>
            <p style="color:#aaa;font-size:13px;">${video.descripcion}</p>
            <div style="color:#666;font-size:11px;">Por: ${video.autor}</div>
            <div class="video-actions">
              <button onclick="darLike('${video.id}')" class="btn btn-secondary">üëç ${video.likes}</button>
              <button onclick="toggleFavorito('${video.id}')" class="btn btn-secondary">${iconoFav}</button>
              <button onclick="compartir('${video.id}')" class="btn btn-secondary">üì§</button>
              ${video.esPropio ? `<button onclick="eliminarVideo('${video.id}')" class="btn" style="background:#c00;color:#fff;">üóëÔ∏è</button>` : ''}
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }
    
    function cambiarTab(tab) {
      tabActual = tab;
      
      // Actualizar tabs
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.getElementById(`tab-${tab}`).classList.add('active');
      
      renderVideos();
    }
    
    function reproducirVideo(id) {
      const video = getVideos().find(v => v.id === id);
      if (!video) return;
      
      // Incrementar visualizaciones
      video.visualizaciones++;
      const videos = getVideos();
      const index = videos.findIndex(v => v.id === id);
      videos[index] = video;
      saveVideos(videos);
      
      // Mostrar reproductor
      const modal = document.getElementById('modalReproductor');
      const content = document.getElementById('reproductorContent');
      
      content.innerHTML = `
        <h2 style="color:#FFD700;margin-bottom:12px;">${video.titulo}</h2>
        <div style="width:100%;height:400px;background:#000;border-radius:8px;display:flex;align-items:center;justify-content:center;margin-bottom:12px;">
          <div style="text-align:center;color:#666;">
            <div style="font-size:64px;margin-bottom:16px;">‚ñ∂Ô∏è</div>
            <div>Reproduciendo: ${video.titulo}</div>
            ${video.envivo ? '<div style="color:#c00;margin-top:8px;">üî¥ TRANSMISI√ìN EN VIVO</div>' : ''}
          </div>
        </div>
        <p style="color:#aaa;">${video.descripcion}</p>
        <div style="margin-top:12px;color:#666;font-size:14px;">
          üëÅÔ∏è ${video.visualizaciones} visualizaciones ‚Ä¢ üëç ${video.likes} likes ‚Ä¢ ${video.fecha}
        </div>
      `;
      
      modal.style.display = 'block';
      renderVideos(); // Actualizar contador
    }
    
    function cerrarReproductor() {
      document.getElementById('modalReproductor').style.display = 'none';
    }
    
    function darLike(id) {
      const videos = getVideos();
      const index = videos.findIndex(v => v.id === id);
      videos[index].likes++;
      saveVideos(videos);
      renderVideos();
    }
    
    function toggleFavorito(id) {
      const favoritos = getFavoritos();
      const index = favoritos.indexOf(id);
      
      if (index > -1) {
        favoritos.splice(index, 1);
      } else {
        favoritos.push(id);
      }
      
      saveFavoritos(favoritos);
      renderVideos();
    }
    
    function compartir(id) {
      const video = getVideos().find(v => v.id === id);
      alert(`üì§ Compartir: ${video.titulo}\n\n(Funci√≥n de compartir en desarrollo)`);
    }
    
    function subirVideo() {
      const titulo = prompt('T√≠tulo del video:');
      if (!titulo) return;
      
      const descripcion = prompt('Descripci√≥n (opcional):') || '';
      const categoria = prompt('Categor√≠a (partido/entrenamiento):') || 'partido';
      
      const videos = getVideos();
      const autor = localStorage.getItem('futpro_usuario_nombre') || 'Usuario';
      
      const nuevoVideo = {
        id: Date.now().toString(),
        titulo: titulo,
        descripcion: descripcion,
        categoria: categoria,
        autor: autor,
        fecha: new Date().toLocaleDateString(),
        visualizaciones: 0,
        likes: 0,
        destacado: false,
        envivo: false,
        esPropio: true
      };
      
      videos.unshift(nuevoVideo);
      saveVideos(videos);
      renderVideos();
    }
    
    function crearTransmision() {
      const titulo = prompt('T√≠tulo de la transmisi√≥n en vivo:');
      if (!titulo) return;
      
      const videos = getVideos();
      const autor = localStorage.getItem('futpro_usuario_nombre') || 'Usuario';
      
      const transmision = {
        id: Date.now().toString(),
        titulo: titulo,
        descripcion: 'Transmisi√≥n en vivo',
        categoria: 'partido',
        autor: autor,
        fecha: new Date().toLocaleDateString(),
        visualizaciones: 0,
        likes: 0,
        destacado: true,
        envivo: true,
        esPropio: true
      };
      
      videos.unshift(transmision);
      saveVideos(videos);
      cambiarTab('envivo');
    }
    
    function eliminarVideo(id) {
      if (confirm('¬øEliminar este video?')) {
        const videos = getVideos().filter(v => v.id !== id);
        saveVideos(videos);
        renderVideos();
      }
    }
    
    // Inicializar con datos de ejemplo
    if (getVideos().length === 0) {
      const ejemplos = [
        {
          id: '1', titulo: 'Gol de la fecha - Champions League', descripcion: 'Incre√≠ble gol desde fuera del √°rea',
          categoria: 'partido', autor: 'UEFA', fecha: new Date().toLocaleDateString(),
          visualizaciones: 1250, likes: 89, destacado: true, envivo: false, esPropio: false
        },
        {
          id: '2', titulo: 'Entrenamiento de velocidad', descripcion: 'Ejercicios para mejorar la velocidad',
          categoria: 'entrenamiento', autor: 'Coach Pro', fecha: new Date().toLocaleDateString(),
          visualizaciones: 540, likes: 34, destacado: false, envivo: false, esPropio: false
        },
        {
          id: '3', titulo: 'Final Liga Local - EN VIVO', descripcion: 'Transmisi√≥n en directo del partido final',
          categoria: 'partido', autor: 'Liga Local', fecha: new Date().toLocaleDateString(),
          visualizaciones: 890, likes: 56, destacado: true, envivo: true, esPropio: false
        }
      ];
      saveVideos(ejemplos);
    }
    
    renderVideos();
  </script>
</body>
</html>