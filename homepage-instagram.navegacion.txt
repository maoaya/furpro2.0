    document.addEventListener('DOMContentLoaded', function() {
        const user = JSON.parse(localStorage.getItem('futpro_user') || '{}');
            window.location.href = './index.html';
    class FutProAutoSave {
            let user = JSON.parse(localStorage.getItem('futpro_user') || '{}');
                localStorage.setItem('futpro_user', JSON.stringify(user));
                if (!localStorage.getItem(`futpro_${key}`)) {
                    localStorage.setItem(`futpro_${key}`, JSON.stringify(defaultData[key]));
                let existingData = JSON.parse(localStorage.getItem(`futpro_${categoria}`) || '[]');
                localStorage.setItem(`futpro_${categoria}`, JSON.stringify(existingData));
    const futproAutoSave = new FutProAutoSave();
            window.addEventListener('DOMContentLoaded', function() {
        const publicaciones = (JSON.parse(localStorage.getItem('futpro_publicaciones_globales')||'[]')).sort((a,b)=>new Date(b.fecha)-new Date(a.fecha));
            const user = JSON.parse(localStorage.getItem('futpro_user')||'{}');
        const user = JSON.parse(localStorage.getItem('futpro_user')||'{}');
        let likes = JSON.parse(localStorage.getItem('futpro_pub_likes_'+pubId)||'[]');
            autoSave.save('likes_dados', {
        localStorage.setItem('futpro_pub_likes_'+pubId, JSON.stringify(likes));
                    let comentarios = JSON.parse(localStorage.getItem('futpro_pub_coment_'+pubId)||'[]');
                    const user = JSON.parse(localStorage.getItem('futpro_user')||'{}');
                    let comentarios = JSON.parse(localStorage.getItem('futpro_pub_coment_'+pubId)||'[]');
                    const user = JSON.parse(localStorage.getItem('futpro_user')||'{}');
                    localStorage.setItem('futpro_pub_coment_'+pubId, JSON.stringify(comentarios));
                    autoSave.save('comentarios_hechos', {
            const data = JSON.parse(localStorage.getItem(`futpro_${categoria}`) || '[]');
        // Guardar en localStorage
        const notificaciones = JSON.parse(localStorage.getItem('futpro_notificaciones') || '[]');
        localStorage.setItem('futpro_notificaciones', JSON.stringify(notificaciones));
        const user = JSON.parse(localStorage.getItem('futpro_user')||'{}');
        const publicaciones = JSON.parse(localStorage.getItem('futpro_publicaciones_globales')||'[]');
            localStorage.setItem('futpro_publicaciones_globales', JSON.stringify(publicaciones));
                    const publicaciones = JSON.parse(localStorage.getItem('futpro_publicaciones_globales')||'[]');
                    let publicaciones = JSON.parse(localStorage.getItem('futpro_publicaciones_globales')||'[]');
                                localStorage.setItem('futpro_publicaciones_globales', JSON.stringify(publicaciones));
                            localStorage.setItem('futpro_publicaciones_globales', JSON.stringify(publicaciones));
                        autoSave.save('publicaciones', {
                    let publicaciones = JSON.parse(localStorage.getItem('futpro_publicaciones_globales')||'[]');
                    localStorage.setItem('futpro_publicaciones_globales', JSON.stringify(publicaciones));
                    autoSave.save('publicaciones', {
                    autoSave.save('publicaciones', {
                    const productos = JSON.parse(localStorage.getItem('futpro_marketplace_productos')||'[]');
                        localStorage.setItem('futpro_marketplace_productos', JSON.stringify(productosDemo));
                    const productos = [...JSON.parse(localStorage.getItem('futpro_marketplace_productos')||'[]')];
                    const user = JSON.parse(localStorage.getItem('futpro_user')||'{}');
                        let productos = JSON.parse(localStorage.getItem('futpro_marketplace_productos')||'[]');
                        localStorage.setItem('futpro_marketplace_productos', JSON.stringify(productos));
                        autoSave.save('marketplace', nuevoProducto, 'crear');
                    let chats = JSON.parse(localStorage.getItem('futpro_chats')||'{}');
                    localStorage.setItem('futpro_chats', JSON.stringify(chats));
                    autoSave.save('mensajes_enviados', {destinatario: vendedorId, contenido: mensaje, tipo: 'marketplace'}, 'crear');
                    // Agregar videos de localStorage
                    const videosGuardados = JSON.parse(localStorage.getItem('futpro_videos')||'[]');
                    autoSave.save('likes_dados', {
                    let alertas = JSON.parse(localStorage.getItem('futpro_alertas')||'[]');
                        localStorage.setItem('futpro_alertas', JSON.stringify(alertas));
                    const alertas = JSON.parse(localStorage.getItem('futpro_alertas')||'[]');
                    let chats = JSON.parse(localStorage.getItem('futpro_chats')||'{}');
                        localStorage.setItem('futpro_chats', JSON.stringify(chats));
                    const chats = chatsData || JSON.parse(localStorage.getItem('futpro_chats')||'{}');
                document.addEventListener('DOMContentLoaded', inicializarBadges);
    class FutProAutoSave {
                // Guardar en localStorage
                const existingData = JSON.parse(localStorage.getItem(`futpro_autosave_${categoria}`) || '[]');
                localStorage.setItem(`futpro_autosave_${categoria}`, JSON.stringify(existingData));
            const data = JSON.parse(localStorage.getItem(`futpro_${categoria}`) || '[]');
            const notifs = JSON.parse(localStorage.getItem(`futpro_notificaciones_${targetUserId || this.userId}`) || '[]');
            localStorage.setItem(`futpro_notificaciones_${targetUserId || this.userId}`, JSON.stringify(notifs));
            const estadisticas = JSON.parse(localStorage.getItem('futpro_estadisticas_equipo') || '[]');
            localStorage.setItem('futpro_estadisticas_equipo', JSON.stringify(estadisticas));
            const mensajesRecibidos = JSON.parse(localStorage.getItem(`futpro_mensajes_recibidos_${mensajeData.destinatarioId}`) || '[]');
            localStorage.setItem(`futpro_mensajes_recibidos_${mensajeData.destinatarioId}`, JSON.stringify(mensajesRecibidos));
            return JSON.parse(localStorage.getItem('futpro_user') || '{}');
                let publicaciones = JSON.parse(localStorage.getItem('futpro_publicaciones') || '[]');
                localStorage.setItem('futpro_publicaciones', JSON.stringify(publicaciones));
            window.location.href = '/homepage-instagram.html';
        const usuario = JSON.parse(localStorage.getItem('futpro_user') || '{}');
            window.location.href = '/editar-perfil.html';
            window.location.href = '/perfil-instagram.html';
        autoSave.save('navegacion', {
    window.location.href = '/editar-perfil.html';
        const stats = JSON.parse(localStorage.getItem('futpro_stats') || '{}');
            localStorage.setItem('futpro_stats', JSON.stringify(estadisticasBase));
            autoSave.save('estadisticas_detalladas', {
        autoSave.save('navegacion', {
    window.location.href = '/estadisticas.html';
        const partidos = JSON.parse(localStorage.getItem('futpro_partidos') || '[]');
            localStorage.setItem('futpro_partidos', JSON.stringify(partidosDemo));
                autoSave.save('partidos', {
        autoSave.save('navegacion', {
    window.location.href = '/partidos.html';
        const stats = JSON.parse(localStorage.getItem('futpro_stats') || '{}');
        localStorage.setItem('futpro_logros', JSON.stringify(logros));
    window.location.href = '/logros.html';
    window.location.href = '/tarjetas.html';
    window.location.href = '/equipos.html';
            const equipos = JSON.parse(localStorage.getItem('futpro_equipos') || '[]');
            localStorage.setItem('futpro_equipos', JSON.stringify(equipos));
            autoSave.save('equipos', nuevoEquipo, 'crear');
            window.location.href = './equipos.html';
        autoSave.save('navegacion', {
    window.location.href = '/torneo.html';
            const torneos = JSON.parse(localStorage.getItem('futpro_torneos') || '[]');
            localStorage.setItem('futpro_torneos', JSON.stringify(torneos));
            autoSave.save('torneos', nuevoTorneo, 'crear');
            autoSave.save('registros_campeonato', {
            window.location.href = './torneo.html';
    window.location.href = '/amistoso.html';
    window.location.href = '/penaltis.html';
    window.location.href = '/juegos.html';
    window.location.href = '/fifa-card-demo.html';
        const stats = JSON.parse(localStorage.getItem('futpro_stats') || '{}');
        localStorage.setItem('futpro_notificaciones', JSON.stringify(notificaciones));
    window.location.href = '/notificaciones.html';
    window.location.href = '/chat.html';
    window.location.href = '/videos.html';
    window.location.href = '/marketplace.html';
    window.location.href = '/estados.html';
        const amigos = JSON.parse(localStorage.getItem('futpro_amigos') || '[]');
            localStorage.setItem('futpro_amigos', JSON.stringify(amigosDemo));
    window.location.href = '/amigos.html';
    window.location.href = '/ranking.html';
    window.location.href = '/ranking.html#partidos';
    window.location.href = '/buscar-ranking.html';
    window.location.href = '/configuracion.html';
            const tickets = JSON.parse(localStorage.getItem('futpro_soporte') || '[]');
            localStorage.setItem('futpro_soporte', JSON.stringify(tickets));
            window.location.href = './soporte.html';
    window.location.href = '/privacidad.html';
            localStorage.removeItem('futpro_user');
            localStorage.removeItem('futpro_token');
            sessionStorage.clear();
        window.location.href = '/index.html';
            return JSON.parse(localStorage.getItem('futpro_amistosos')||'[]');
            localStorage.setItem('futpro_amistosos', JSON.stringify(arr));
                    localStorage.setItem('futpro_amistosos', JSON.stringify(amistosos));
            return JSON.parse(localStorage.getItem('futpro_torneos')||'[]');
            localStorage.setItem('futpro_torneos', JSON.stringify(arr));
            return JSON.parse(localStorage.getItem('futpro_equipos')||'[]');
            localStorage.setItem('futpro_equipos', JSON.stringify(arr));
            return JSON.parse(localStorage.getItem('futpro_market')||'[]');
            localStorage.setItem('futpro_market', JSON.stringify(arr));
            window.location.href = './estados.html';
            window.location.href = './videos.html';
            window.location.href = './torneo.html';
            window.location.href = './equipos.html';
            window.location.href = './torneo.html#crear';
            window.location.href = './equipos.html#crear';
            window.location.href = './amistoso.html';
            const userData = localStorage.getItem('futpro_usuario');
                localStorage.setItem('futpro_card', card);
            window.location.href = './penaltis.html';
            window.location.href = './juegos.html';
            window.location.href = './ranking.html#equipos';
            window.location.href = './ranking.html#partidos';
            const userData = localStorage.getItem('futpro_usuario');
                autoSave.save('navegacion', {
                localStorage.removeItem('futpro_sesion_activa');
                window.location.href = './formulario-completo.html';
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
                autoSave.save('likes_dados', {
                    autoSave.save('likes_recibidos', {
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
                autoSave.save('likes_dados', {
            window.location.href = './marketplace.html';
            window.location.href = './videos.html';
            window.location.href = './notificaciones.html';
            window.location.href = './chat.html';
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
                autoSave.save('historias_vistas', {
                const existingViews = JSON.parse(localStorage.getItem(`futpro_historia_views_${historiaActual}_${videoIndex}`) || '[]');
                    localStorage.setItem(`futpro_historia_views_${historiaActual}_${videoIndex}`, JSON.stringify(existingViews));
                    autoSave.save('historias_vistas', {
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
                autoSave.save('likes_dados', {
                    autoSave.save('likes_recibidos', {
                const likesHistoria = JSON.parse(localStorage.getItem(`futpro_historia_likes_${historiaActual}_${videoIndex}`) || '[]');
                localStorage.setItem(`futpro_historia_likes_${historiaActual}_${videoIndex}`, JSON.stringify(likesHistoria));
                const likesHistoria = JSON.parse(localStorage.getItem(`futpro_historia_likes_${historiaActual}_${videoIndex}`) || '[]');
                localStorage.setItem(`futpro_historia_likes_${historiaActual}_${videoIndex}`, JSON.stringify(nuevosLikes));
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
            const viewersData = JSON.parse(localStorage.getItem(`futpro_historia_views_${historiaActual}_${videoIndex}`) || '[]');
            const likesData = JSON.parse(localStorage.getItem(`futpro_historia_likes_${historiaActual}_${videoIndex}`) || '[]');
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
            const comentarios = JSON.parse(localStorage.getItem(`futpro_historia_comentarios_${historiaActual}_${videoIndex}`) || '[]');
                localStorage.setItem(`futpro_historia_comentarios_${historiaActual}_${videoIndex}`, JSON.stringify(comentarios));
                autoSave.save('comentarios_hechos', {
                    autoSave.save('comentarios_recibidos', {
            const currentUser = JSON.parse(localStorage.getItem('futpro_user') || '{}');
                autoSave.save('comentarios_hechos', comentarioData, 'crear');
                    autoSave.save('comentarios_recibidos', {
                    url: window.location.href
                const url = window.location.href;
